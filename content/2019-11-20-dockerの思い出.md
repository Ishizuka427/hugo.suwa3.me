---
title: "Dockerの思い出"
date: "2019-11-20T13:00:00.000Z"
categories: 
  - "poem"
  - "tech-blog"
tags: 
---

夜は疲れたので帰宅後即寝です！

https://wp.suwa3.me/2019/08/26/厳しめモードDocker/

これ読んでいて、懐かしいなぁと思うの。  
Dockerの問題云々ではなく  
恐らくどこかしらの鯖からのリクエストが急増するなどして  
処理しきれなくなってEC2が不安定になるのだけれども。

EC2の再起動すると、スナップショットも取っていないし  
IP変わってしまう可能性あるので、Dockerをひとまず落として  
（DBのマウントはしてあるので）  
Dockerをdownさせると挙動が遅くて落ちきれず  
その状態でうっかりupさせると、ただでさえ捌ききれてないStreaming apiが残像みたいに残ったまま  
docker-composeが忖度して  
「Streaming api無いのでは？！なんかStreamingコンテナ無さげだし新しくコンテナたてといたよ〜｣  
って感じで、重複させてコンテナ起動してしまうの。途中から明らかに人災。

設定ファイルの整理と見直しをしたい。  
できるならAnsible化しながら、それらをやってしまいたい。  
設定ファイルをまとめてGitHubに上げるところからだなぁ。  
少しづつ頑張ろう💪
