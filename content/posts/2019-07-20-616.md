---
title: "PORTもくもくメンテナンス"
date: "2019-07-20T13:00:56.000Z"
categories: 
  - "%e6%9c%aa%e5%88%86%e9%a1%9e"
tags: 
  - "mastodon"
  - "nginx"
  - "port"
  - "postgresql"
---

PORTのもくもく会へ行ってきました。

![](/images/2019-07-20-15-59-296921878416423206603.jpg)

おやつタイムに配られたシュークリームアイス😊

ランチタイムも色々と会話できたの楽しかったです。

主にMastodonのバックアップ/メンテナンスやりました。

.

やったこと

\- postgreSQLのバックアップ

\- GitHubで設定ファイルの保全

\- EC2上へメンテナンスページの設置

\- メンテナンスの流れ確認(設定ファイルについてなど)

.

postgreSQLのバックアップとったの。

.

第 23章バックアップとリストア

https://www.postgresql.jp/document/8.1/html/backup.html

復習しておこう。

Docker上にバックアップ用のディレクトリを作成して

pg\_dumpを実行しました。

.

Nginx設定ファイル内の整理をして

Mastodonの設定ファイルとNginxの設定ファイルを

scpコマンドをつかいDLしてGitHubに保存。

.

EC2インスタンス上にメンテナンスページ用のディレクトリを作成して

GitHub上にメンテナンスページを置いていたので

それをgit cloneしてメンテナンスの準備をしたよ。

.

![](/images/2019-07-20-16-44-013747700988380974567.jpg)

site-availableにメンテナンス用のNginx設定ファイルを置いて

中の設定ファイルをメンテナンス用に変更したの。

シンボリックリンクを書き換えて、設定ファイルをテストし

忘れずにNginxをリロード。

.

これblog書いていて

下書き保存がうまくいかず

一度ぜんぶ消えてしまったので

もう一度はじめから書き直したの

復習バッチリです！！！

.

![](/images/2019-07-20-20-08-562474387897727611349.jpg)

帰りは一杯飲んで帰ったよお。
