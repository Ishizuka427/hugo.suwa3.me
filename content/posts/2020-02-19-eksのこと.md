---
title: "EKSのこと"
date: "2020-02-19T13:00:00.000Z"
categories: 
  - "poem"
  - "tech-blog"
tags: 
---

昨日は落ちていたけれども、午後には回復してきました。

EKSにおいて定義、仮説、検証を繰り返している。  
まずとにかく専門用語が多い。Kubernates用語とEKS用語が混ざる。  
しかし、言葉の定義が曖昧だと後々痛い目にあうので手を抜けない。

AWS公式リファレンスは概要のみで  
OSSであればソースを読むことで予測できる部分があるが  
マネジメントサービスは内部で何がどう動いているのかが分かりづらいの。  
特にロールポリシーのアタッチなど、権限の種類などについては  
JSONを読み解きながら  
仮説をたてて実際に検証することで内部構造を把握する必要がある。

【疑問】FergateにおけるPod実行ロールについての考え方  
Fergateを使わずにサービスロールの設定をする際には「Amazon EKS Service Policy」と「Amazon EKS Cluster Policy」をアタッチしたけれども、Fergateを利用する際にはそれの代わりに「Amazon EKS Fargate Pod Execution Role Policy」をアタッチする必要があるという認識であっているのか。

そしてeksctl createコマンドで--fargateオプションをつけることで、上記のIAMロールの代わりを自動で設定してくれるということ？  
（IAMのロールを確認したら、コマンド実行したタイミングで「 Amazon EKS For Fargate Service Role Policy」が生成されていた）

ECSもFergateを利用することでIAMロール自動設定されていた記憶ある。  
\=> ロール周りのポリシーについてJSONなど確認する。  
仮説＆検証を繰り返してError内容からロールの範囲詳細を探りたいので、出来る範囲で試行してみる。効率考えて計画を練る。
