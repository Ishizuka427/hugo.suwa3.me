---
title: "ラズパイとElasticsearchなど"
date: "2020-05-18T13:00:00.000Z"
categories: 
  - "poem"
  - "tech-blog"
tags: 
---

ラズパイがひたすら起動画面なので  
シングルユーザーモードに切り替えてログインしてみようと思います。

Macbook Airに  
\- Raspbian入りSDをマシンに認識させてcmdline.txt を編集  
\- 起動オプションの末尾に init=/bin/sh を加える  
\- 編集前のファイルはバックアップとる  
\- RasPiに挿入してシングルユーザーモードで起動

```
-rwxrwxrwx  1 suwa  staff       179  4  8 13:29 cmdline.txt
```

権限は足りているはずなのにRead Onlyなの。  
SDカードのROCKは壊してあるから制限かからないはずだし  
`sudo vi` で編集画面を開いたんだけどなあ。  
本当は`/var/log`を確認したかったのだけれども。

* * *

｢休みの日もめっちゃ勉強してますよね｣  
って言われた。  
やっているように見せかけて  
実際の稼働時間は長くないし質もそこまで高くないという・・

日中なかなか仕事が捗らないから  
その代わり、夜に作業するのだけれども  
そうすると、いままで新規の技術習得に充てていた時間がごっそりなくなるの。

早くオフィス勤務か、最寄りのカフェなどで作業したい。  
自宅だと集中するの難しいなぁ。

お仕事は、作業ログに  
「わからん」「意味不」「全体的に何言ってるか分かんないです」  
と書きながらセットアップする作業しました  
明日調べる〜〜〜

* * *

Docker上でElasticsearchを検証するの満足したら  
Goで書いたAPIサーバーと連携させたい。  
ElasticsearchのAPI仕様からGoのコードを自動生成するジェネレーター見つけた。参考にできるかな？  
[https://github.com/olivere/elastic/tree/generate-api/generator](https://github.com/olivere/elastic/tree/generate-api/generator)

* * *

鯖缶工場というDiscordサーバーに参加しました。  
分散SNSの構築とサーバー管理について、サポートを目的としたコミュニティです。

ずっとdocker-compose上でMastodonの本番運用をしていたのだけれども  
EC2インスタンス上にリプレイスして、動作確認は済んでいて  
あとはメディアストレージ(S3)の設定、というところまで進んだので  
そろそろ再稼働させたいし、開発コミュニティにどんどん参加していこうと思ったの。

Dockerを使っての構築や、PostgreSQLやMastodonのバージョン縛りでの構築。  
バージョン追従など、色々と経験させてもらったので  
今後はコミュニティに参加しながらサポート側も経験できたら良いなぁという気持ちです。

Mastodon内でもElasticsearch機能は実装されているので  
慣れてきたら触ってみたいなぁ。
